(this["webpackJsonpcontext-reducer"]=this["webpackJsonpcontext-reducer"]||[]).push([[0],{20:function(e,t,a){e.exports=a(31)},25:function(e,t,a){},31:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(17),c=a.n(l),o=(a(25),a(10)),s=a(3),u={set:function(e){var t=e.username,a=e.password,n={username:t,password:m(a)};localStorage.setItem("crUser",JSON.stringify(n))},get:function(){var e=localStorage.getItem("crUser");return JSON.parse(e)},rm:function(){var e=this.get();return localStorage.removeItem("crUser"),e}},m=function(e){return"youSmarty"+e.split("").reverse().join("")},i=u,p=r.a.createContext(),d={isLoggedIn:!1,username:"",password:""};function E(e,t){var a=t.payload,n=a.username,r=a.password;switch(t.type){case"login":var l=i.get();return(null===l||void 0===l?void 0:l.username)===n&&(null===l||void 0===l?void 0:l.password)===m(r)?Object(s.a)(Object(s.a)({},e),{},{isLoggedIn:!0,username:n,password:r}):Object(s.a)(Object(s.a)({},e),{},{isLoggedIn:!1});case"logout":return Object(s.a)(Object(s.a)({},e),d);case"signup":return i.set(t.payload),Object(s.a)(Object(s.a)({},e),{},{username:n,password:r});default:return e}}function h(e){var t=e.children,a=Object(n.useReducer)(E,d),l=Object(o.a)(a,2),c=l[0],u=l[1];return r.a.createElement(p.Provider,{value:Object(s.a)(Object(s.a)({},c),{},{dispatch:u})},t)}var b=a(4),g=a(1);var f=[{path:"/dashboard",component:function(){var e=Object(n.useContext)(p).username;return r.a.createElement("div",{className:"content"},r.a.createElement("h1",null,"Welcome ",r.a.createElement("span",{className:"white"},e)," ,"),r.a.createElement("h3",null,"Checkout user-details page for more information..."))}},{path:"/userdetails",component:function(){var e=Object(n.useContext)(p),t=e.username,a=e.password;return r.a.createElement("div",{className:"content"},r.a.createElement("h1",null,"User Details:"),r.a.createElement("h2",null,"Username : ",r.a.createElement("span",{className:"white"},t)),r.a.createElement("h2",null,"Password : ",r.a.createElement("span",{className:"olive"},a)))}}];var v=function(){return r.a.createElement("div",{className:"content"},r.a.createElement("h1",null,"Welcome to ",r.a.createElement("span",{className:"project-name"},"context-reducer")," project!"),r.a.createElement("h3",null,"This project is done in ",r.a.createElement("span",{className:"white"},"react-js")),r.a.createElement("p",null,"Here ",r.a.createElement("span",{className:"white"},"react-router-dom")," is used and protected routes are implemented with authentication done in global state."),r.a.createElement("p",null,"To consume auth state from global state, ",r.a.createElement("span",{className:"white"},"useContext")," hook is used and to change auth state from a component, dispatch method from ",r.a.createElement("span",{className:"white"},"useReducer")," hook is called."),r.a.createElement("p",null,"Repo on ",r.a.createElement("a",{href:"https://github.com/azashi/context-reducer",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("span",{className:"blue"},"GitHub"))))},j=a(9);var O=function(e){var t=e.handleSubmit,a=e.handleDetails,n=e.details,l=e.submitButton;return r.a.createElement("form",{onSubmit:t,className:"form",autoComplete:"off"},r.a.createElement("div",{className:"input-group"},r.a.createElement("label",{htmlFor:"username"},"Enter username"),r.a.createElement("input",{type:"text",name:"username",onChange:a,value:n.username,required:!0})),r.a.createElement("div",{className:"input-group"},r.a.createElement("label",{htmlFor:"password"},"Enter password"),r.a.createElement("input",{type:"password",name:"password",onChange:a,value:n.password,required:!0})),r.a.createElement("div",{className:"btn-group"},r.a.createElement("button",{type:"submit"},l)))};var w=function(){return r.a.createElement("div",{className:"content"},r.a.createElement("h3",null,"Help"),r.a.createElement("ol",{style:N},r.a.createElement("li",null," Username or password is incorrect"),r.a.createElement("li",null," Please Sign Up first"),r.a.createElement("li",null," Username and password are persisted in local-storage after sign up"),r.a.createElement("li",null," If you forget your login details, just sign up again")),r.a.createElement("br",null),r.a.createElement("p",null,"For code implementation details visit this project's repo on ",r.a.createElement("a",{href:"https://github.com/azashi/context-reducer",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("span",{className:"blue"},"GitHub"))))},N={marginLeft:"20px"},y={protectedRoutes:f,publicRoutes:[{path:"/",component:v},{path:"/login",component:function(){var e=Object(n.useContext)(p),t=e.username,a=e.password,l=Object(g.g)(),c=Object(n.useState)({username:t,password:a}),u=Object(o.a)(c,2),m=u[0],i=u[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Log In"),r.a.createElement(O,{handleSubmit:function(t){t.preventDefault(),e.dispatch({type:"login",payload:m}),l.replace("/dashboard")},handleDetails:function(e){var t=e.target,a=t.name,n=t.value;i((function(e){return Object(s.a)(Object(s.a)({},e),{},Object(j.a)({},a,n))}))},details:m,submitButton:"Login"}))}},{path:"/signup",component:function(){var e=Object(n.useContext)(p),t=Object(g.g)(),a=Object(n.useState)({username:"",password:""}),l=Object(o.a)(a,2),c=l[0],u=l[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Sign Up"),r.a.createElement(O,{handleSubmit:function(a){a.preventDefault(),e.dispatch({type:"signup",payload:c}),t.push("/login")},handleDetails:function(e){var t=e.target,a=t.name,n=t.value;u((function(e){return Object(s.a)(Object(s.a)({},e),{},Object(j.a)({},a,n))}))},details:c,submitButton:"Sign Up"}))}},{path:"/help",component:w}]},x=a(19);var S=function(e){var t=e.component,a=Object(x.a)(e,["component"]),l=Object(n.useContext)(p);return r.a.createElement(g.b,Object.assign({},a,{render:function(e){return l.isLoggedIn?r.a.createElement(t,e):r.a.createElement(g.a,{to:{pathname:"/help",state:{from:e.location}}})}}))};var C=function(){return r.a.createElement(n.Fragment,null,r.a.createElement("h2",null,"Error 404 not found"))};var U=r.a.memo((function(){var e=Object(n.useContext)(p),t=Object(g.g)(),a=r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement(b.b,{to:"/"},"Home")),r.a.createElement("li",null,r.a.createElement(b.b,{to:"/signup"},"Sign-Up")),r.a.createElement("li",null,r.a.createElement(b.b,{to:"/login"},"Login")));return e.isLoggedIn&&(a=r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement(b.b,{to:"/dashboard"},"Dashboard")),r.a.createElement("li",null,r.a.createElement(b.b,{to:"/userdetails"},"User Details")),r.a.createElement("li",null,r.a.createElement(b.b,{to:"",className:"logout",onClick:function(){e.dispatch({type:"logout",payload:""}),t.push("/login")}},"Log Out")))),r.a.createElement("div",{className:"header"},r.a.createElement("nav",null,r.a.createElement("ul",null,a)))}));var I=r.a.memo((function(){return r.a.createElement("div",{className:"footer"},r.a.createElement("p",null,"This project implements protected routes and global auth state with useContext & useReducer"))}));var k=function(e){var t=e.children;return r.a.createElement(n.Fragment,null,r.a.createElement(U,null),r.a.createElement("div",{className:"main"},t),r.a.createElement(I,null))};var L=function(){return r.a.createElement(h,null,r.a.createElement(b.a,null,r.a.createElement(k,null,r.a.createElement(g.d,null,y.publicRoutes.map((function(e){var t=e.path,a=e.component;return r.a.createElement(g.b,{key:t,exact:!0,path:t,component:a})})),y.protectedRoutes.map((function(e){var t=e.path,a=e.component;return r.a.createElement(S,{key:t,exact:!0,path:t,component:a})})),r.a.createElement(g.b,{component:C})))))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(L,null)),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.05160f95.chunk.js.map